"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./lib/supabase/middleware.ts":
/*!************************************!*\
  !*** ./lib/supabase/middleware.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateSession: () => (/* binding */ updateSession)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/index.mjs\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var _lib_security_securityHeaders__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/security/securityHeaders */ \"(middleware)/./lib/security/securityHeaders.ts\");\n\n\n\nasync function updateSession(request) {\n    let supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n        request\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://your-project-id.supabase.co\", \"your-supabase-anon-key-here\", {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>request.cookies.set(name, value));\n                supabaseResponse = next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.next({\n                    request\n                });\n                cookiesToSet.forEach(({ name, value, options })=>supabaseResponse.cookies.set(name, value, options));\n            }\n        }\n    });\n    // IMPORTANT: Avoid writing any logic between createServerClient and\n    // supabase.auth.getUser(). A simple mistake could make it very hard to debug\n    // issues with users being randomly logged out.\n    const { data: { user } } = await supabase.auth.getUser();\n    // Allow static media files to pass through\n    if (request.nextUrl.pathname.startsWith('/media/') || request.nextUrl.pathname.startsWith('/_next/') || request.nextUrl.pathname.startsWith('/favicon.ico')) {\n        return supabaseResponse;\n    }\n    // Public pages that don't require authentication\n    const publicPaths = [\n        '/',\n        '/auth',\n        '/auth/callback',\n        '/listings',\n        '/faq',\n        '/privacy',\n        '/terms',\n        '/dealer-agreement',\n        '/about',\n        '/investors'\n    ];\n    const isPublicPath = publicPaths.some((path)=>request.nextUrl.pathname === path || request.nextUrl.pathname.startsWith(path + '/'));\n    // API routes that don't require authentication (webhooks, public endpoints)\n    const publicApiPaths = [\n        '/api/stripe/webhook'\n    ];\n    const isPublicApiPath = publicApiPaths.some((path)=>request.nextUrl.pathname === path || request.nextUrl.pathname.startsWith(path + '/'));\n    // Allow public paths and public API paths\n    if (isPublicPath || isPublicApiPath) {\n        return (0,_lib_security_securityHeaders__WEBPACK_IMPORTED_MODULE_2__.applySecurityHeaders)(supabaseResponse);\n    }\n    // Require authentication for all other paths\n    if (!user) {\n        // Redirect to auth with return URL\n        const url = request.nextUrl.clone();\n        url.pathname = '/auth';\n        url.searchParams.set('redirect', request.nextUrl.pathname);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n    }\n    // Role-based access control for protected paths\n    // Get user profile to check role\n    const { data: profile } = await supabase.from('profiles').select('role').eq('user_id', user.id).single();\n    const userRole = profile?.role || null;\n    // Admin-only paths\n    const adminPaths = [\n        '/admin'\n    ];\n    const isAdminPath = adminPaths.some((path)=>request.nextUrl.pathname === path || request.nextUrl.pathname.startsWith(path + '/'));\n    if (isAdminPath && userRole !== 'admin') {\n        const url = request.nextUrl.clone();\n        url.pathname = '/';\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n    }\n    // Dealer-only paths\n    const dealerPaths = [\n        '/dealer'\n    ];\n    const isDealerPath = dealerPaths.some((path)=>request.nextUrl.pathname === path || request.nextUrl.pathname.startsWith(path + '/'));\n    if (isDealerPath && userRole !== 'dealer' && userRole !== 'private_host') {\n        const url = request.nextUrl.clone();\n        url.pathname = '/onboarding';\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n    }\n    // Renter-only paths\n    const renterPaths = [\n        '/renter'\n    ];\n    const isRenterPath = renterPaths.some((path)=>request.nextUrl.pathname === path || request.nextUrl.pathname.startsWith(path + '/'));\n    if (isRenterPath && userRole !== 'renter') {\n        const url = request.nextUrl.clone();\n        url.pathname = '/onboarding';\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(url);\n    }\n    // IMPORTANT: You *must* return the supabaseResponse object as it is. If you're\n    // creating a new response object with NextResponse.next() make sure to:\n    // 1. Pass the request in it, like so:\n    //    const myNewResponse = NextResponse.next({ request })\n    // 2. Copy over the cookies, like so:\n    //    myNewResponse.cookies.setAll(supabaseResponse.cookies.getAll())\n    // 3. Change the myNewResponse object instead of the supabaseResponse object\n    // Apply security headers\n    return (0,_lib_security_securityHeaders__WEBPACK_IMPORTED_MODULE_2__.applySecurityHeaders)(supabaseResponse);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtJQUVBLCtFQUErRTtJQUMvRSx3RUFBd0U7SUFDeEUsc0NBQXNDO0lBQ3RDLDBEQUEwRDtJQUMxRCxxQ0FBcUM7SUFDckMscUVBQXFFO0lBQ3JFLDRFQUE0RTtJQUU1RSx5QkFBeUI7SUFDekIsT0FBT2hDLG1GQUFvQkEsQ0FBQ0c7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcNWVwbWdcXFByb2plY3RzXFxDYXItcmVudGFsLVxcbGliXFxzdXBhYmFzZVxcbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlLCB0eXBlIE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBhcHBseVNlY3VyaXR5SGVhZGVycyB9IGZyb20gJ0AvbGliL3NlY3VyaXR5L3NlY3VyaXR5SGVhZGVycydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNlc3Npb24ocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgbGV0IHN1cGFiYXNlUmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7XG4gICAgcmVxdWVzdCxcbiAgfSlcblxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldEFsbCgpIHtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdC5jb29raWVzLmdldEFsbCgpXG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbChjb29raWVzVG9TZXQpIHtcbiAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PiByZXF1ZXN0LmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlKSlcbiAgICAgICAgICBzdXBhYmFzZVJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgICAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+XG4gICAgICAgICAgICBzdXBhYmFzZVJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgIClcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApXG5cbiAgLy8gSU1QT1JUQU5UOiBBdm9pZCB3cml0aW5nIGFueSBsb2dpYyBiZXR3ZWVuIGNyZWF0ZVNlcnZlckNsaWVudCBhbmRcbiAgLy8gc3VwYWJhc2UuYXV0aC5nZXRVc2VyKCkuIEEgc2ltcGxlIG1pc3Rha2UgY291bGQgbWFrZSBpdCB2ZXJ5IGhhcmQgdG8gZGVidWdcbiAgLy8gaXNzdWVzIHdpdGggdXNlcnMgYmVpbmcgcmFuZG9tbHkgbG9nZ2VkIG91dC5cblxuICBjb25zdCB7XG4gICAgZGF0YTogeyB1c2VyIH0sXG4gIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuXG4gIC8vIEFsbG93IHN0YXRpYyBtZWRpYSBmaWxlcyB0byBwYXNzIHRocm91Z2hcbiAgaWYgKFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvbWVkaWEvJykgfHxcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL19uZXh0LycpIHx8XG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9mYXZpY29uLmljbycpXG4gICkge1xuICAgIHJldHVybiBzdXBhYmFzZVJlc3BvbnNlXG4gIH1cblxuICAvLyBQdWJsaWMgcGFnZXMgdGhhdCBkb24ndCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG4gIGNvbnN0IHB1YmxpY1BhdGhzID0gW1xuICAgICcvJyxcbiAgICAnL2F1dGgnLFxuICAgICcvYXV0aC9jYWxsYmFjaycsIC8vIE9BdXRoIGNhbGxiYWNrXG4gICAgJy9saXN0aW5ncycsIC8vIEluY2x1ZGVzIC9saXN0aW5ncy9baWRdIGZvciBpbmRpdmlkdWFsIHZlaGljbGUgcGFnZXNcbiAgICAnL2ZhcScsXG4gICAgJy9wcml2YWN5JyxcbiAgICAnL3Rlcm1zJyxcbiAgICAnL2RlYWxlci1hZ3JlZW1lbnQnLFxuICAgICcvYWJvdXQnLFxuICAgICcvaW52ZXN0b3JzJyxcbiAgXVxuXG4gIGNvbnN0IGlzUHVibGljUGF0aCA9IHB1YmxpY1BhdGhzLnNvbWUocGF0aCA9PiBcbiAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09IHBhdGggfHwgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocGF0aCArICcvJylcbiAgKVxuXG4gIC8vIEFQSSByb3V0ZXMgdGhhdCBkb24ndCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uICh3ZWJob29rcywgcHVibGljIGVuZHBvaW50cylcbiAgY29uc3QgcHVibGljQXBpUGF0aHMgPSBbXG4gICAgJy9hcGkvc3RyaXBlL3dlYmhvb2snLCAvLyBTdHJpcGUgd2ViaG9vayAodmVyaWZpZWQgYnkgc2lnbmF0dXJlKVxuICBdXG5cbiAgY29uc3QgaXNQdWJsaWNBcGlQYXRoID0gcHVibGljQXBpUGF0aHMuc29tZShwYXRoID0+IFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gcGF0aCB8fCByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChwYXRoICsgJy8nKVxuICApXG5cbiAgLy8gQWxsb3cgcHVibGljIHBhdGhzIGFuZCBwdWJsaWMgQVBJIHBhdGhzXG4gIGlmIChpc1B1YmxpY1BhdGggfHwgaXNQdWJsaWNBcGlQYXRoKSB7XG4gICAgcmV0dXJuIGFwcGx5U2VjdXJpdHlIZWFkZXJzKHN1cGFiYXNlUmVzcG9uc2UpXG4gIH1cblxuICAvLyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIGZvciBhbGwgb3RoZXIgcGF0aHNcbiAgaWYgKCF1c2VyKSB7XG4gICAgLy8gUmVkaXJlY3QgdG8gYXV0aCB3aXRoIHJldHVybiBVUkxcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICAgIHVybC5wYXRobmFtZSA9ICcvYXV0aCdcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgncmVkaXJlY3QnLCByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdCh1cmwpXG4gIH1cblxuICAvLyBSb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sIGZvciBwcm90ZWN0ZWQgcGF0aHNcbiAgLy8gR2V0IHVzZXIgcHJvZmlsZSB0byBjaGVjayByb2xlXG4gIGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXG4gICAgLnNpbmdsZSgpXG5cbiAgY29uc3QgdXNlclJvbGUgPSBwcm9maWxlPy5yb2xlIHx8IG51bGxcblxuICAvLyBBZG1pbi1vbmx5IHBhdGhzXG4gIGNvbnN0IGFkbWluUGF0aHMgPSBbJy9hZG1pbiddXG4gIGNvbnN0IGlzQWRtaW5QYXRoID0gYWRtaW5QYXRocy5zb21lKHBhdGggPT4gXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSBwYXRoIHx8IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKHBhdGggKyAnLycpXG4gIClcblxuICBpZiAoaXNBZG1pblBhdGggJiYgdXNlclJvbGUgIT09ICdhZG1pbicpIHtcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICAgIHVybC5wYXRobmFtZSA9ICcvJ1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QodXJsKVxuICB9XG5cbiAgLy8gRGVhbGVyLW9ubHkgcGF0aHNcbiAgY29uc3QgZGVhbGVyUGF0aHMgPSBbJy9kZWFsZXInXVxuICBjb25zdCBpc0RlYWxlclBhdGggPSBkZWFsZXJQYXRocy5zb21lKHBhdGggPT4gXG4gICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lID09PSBwYXRoIHx8IHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKHBhdGggKyAnLycpXG4gIClcblxuICBpZiAoaXNEZWFsZXJQYXRoICYmIHVzZXJSb2xlICE9PSAnZGVhbGVyJyAmJiB1c2VyUm9sZSAhPT0gJ3ByaXZhdGVfaG9zdCcpIHtcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICAgIHVybC5wYXRobmFtZSA9ICcvb25ib2FyZGluZydcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybClcbiAgfVxuXG4gIC8vIFJlbnRlci1vbmx5IHBhdGhzXG4gIGNvbnN0IHJlbnRlclBhdGhzID0gWycvcmVudGVyJ11cbiAgY29uc3QgaXNSZW50ZXJQYXRoID0gcmVudGVyUGF0aHMuc29tZShwYXRoID0+IFxuICAgIHJlcXVlc3QubmV4dFVybC5wYXRobmFtZSA9PT0gcGF0aCB8fCByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aChwYXRoICsgJy8nKVxuICApXG5cbiAgaWYgKGlzUmVudGVyUGF0aCAmJiB1c2VyUm9sZSAhPT0gJ3JlbnRlcicpIHtcbiAgICBjb25zdCB1cmwgPSByZXF1ZXN0Lm5leHRVcmwuY2xvbmUoKVxuICAgIHVybC5wYXRobmFtZSA9ICcvb25ib2FyZGluZydcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybClcbiAgfVxuXG4gIC8vIElNUE9SVEFOVDogWW91ICptdXN0KiByZXR1cm4gdGhlIHN1cGFiYXNlUmVzcG9uc2Ugb2JqZWN0IGFzIGl0IGlzLiBJZiB5b3UncmVcbiAgLy8gY3JlYXRpbmcgYSBuZXcgcmVzcG9uc2Ugb2JqZWN0IHdpdGggTmV4dFJlc3BvbnNlLm5leHQoKSBtYWtlIHN1cmUgdG86XG4gIC8vIDEuIFBhc3MgdGhlIHJlcXVlc3QgaW4gaXQsIGxpa2Ugc286XG4gIC8vICAgIGNvbnN0IG15TmV3UmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCh7IHJlcXVlc3QgfSlcbiAgLy8gMi4gQ29weSBvdmVyIHRoZSBjb29raWVzLCBsaWtlIHNvOlxuICAvLyAgICBteU5ld1Jlc3BvbnNlLmNvb2tpZXMuc2V0QWxsKHN1cGFiYXNlUmVzcG9uc2UuY29va2llcy5nZXRBbGwoKSlcbiAgLy8gMy4gQ2hhbmdlIHRoZSBteU5ld1Jlc3BvbnNlIG9iamVjdCBpbnN0ZWFkIG9mIHRoZSBzdXBhYmFzZVJlc3BvbnNlIG9iamVjdFxuXG4gIC8vIEFwcGx5IHNlY3VyaXR5IGhlYWRlcnNcbiAgcmV0dXJuIGFwcGx5U2VjdXJpdHlIZWFkZXJzKHN1cGFiYXNlUmVzcG9uc2UpXG59Il0sIm5hbWVzIjpbImNyZWF0ZVNlcnZlckNsaWVudCIsIk5leHRSZXNwb25zZSIsImFwcGx5U2VjdXJpdHlIZWFkZXJzIiwidXBkYXRlU2Vzc2lvbiIsInJlcXVlc3QiLCJzdXBhYmFzZVJlc3BvbnNlIiwibmV4dCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiY29va2llcyIsImdldEFsbCIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJuYW1lIiwidmFsdWUiLCJvcHRpb25zIiwic2V0IiwiZGF0YSIsInVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsIm5leHRVcmwiLCJwYXRobmFtZSIsInN0YXJ0c1dpdGgiLCJwdWJsaWNQYXRocyIsImlzUHVibGljUGF0aCIsInNvbWUiLCJwYXRoIiwicHVibGljQXBpUGF0aHMiLCJpc1B1YmxpY0FwaVBhdGgiLCJ1cmwiLCJjbG9uZSIsInNlYXJjaFBhcmFtcyIsInJlZGlyZWN0IiwicHJvZmlsZSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwidXNlclJvbGUiLCJyb2xlIiwiYWRtaW5QYXRocyIsImlzQWRtaW5QYXRoIiwiZGVhbGVyUGF0aHMiLCJpc0RlYWxlclBhdGgiLCJyZW50ZXJQYXRocyIsImlzUmVudGVyUGF0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./lib/supabase/middleware.ts\n");

/***/ })

});